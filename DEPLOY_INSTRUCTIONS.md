# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (3 —Ñ–∞–π–ª–∞)

1. ‚úÖ `supabase/functions/ai-price-estimate/index.ts` ‚Äî Edge Function —Å –ò–ò-—Ä–∞—Å—á—ë—Ç–æ–º
2. ‚úÖ `src/pages/NewCalculation.tsx` ‚Äî Frontend (–≤—ã–∑–æ–≤ –ò–ò –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
3. ‚úÖ `src/utils/pricing.ts` ‚Äî —Ç–∏–ø—ã (–Ω–µ –∏–∑–º–µ–Ω—è–ª—Å—è, —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è)

---

## üìã –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### 1. –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```powershell
cd c:\argo-weld-calc
npm run build
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫.

---

### 2. –î–µ–ø–ª–æ–π Edge Function –≤ Supabase

```powershell
supabase functions deploy ai-price-estimate
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω Supabase CLI –∏ –≤—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã.

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

#### –¢–µ—Å—Ç 1: –†–µ–∂–∏–º "–°–≤–∞—Ä–∫–∞ –∏–∑ –∑–∞–≥–æ—Ç–æ–≤–æ–∫" (pre_cut)
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ä–∞—Å—á—ë—Ç
2. –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ "–°–≤–∞—Ä–∫–∞ —Ä–∞–º—ã –∏–∑ –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–π —Ç—Ä—É–±—ã"
3. –®–∞–≥ 2: 
   - –¢–∏–ø —Ä–∞–±–æ—Ç: –°–≤–∞—Ä–∫–∞
   - **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: –°–≤–∞—Ä–∫–∞ –∏–∑ –∑–∞–≥–æ—Ç–æ–≤–æ–∫** ‚Üê –≤—ã–±–µ—Ä–∏—Ç–µ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç
   - –ú–∞—Ç–µ—Ä–∏–∞–ª: –ß–µ—Ä–Ω—ã–π –º–µ—Ç–∞–ª–ª
   - –¢–æ–ª—â–∏–Ω–∞: –¥–æ 3 –º–º
   - –¢–∏–ø —à–≤–∞: –°—Ç—ã–∫–æ–≤–æ–π
   - –û–±—ä—ë–º: 10 –º
4. –ù–∞–∂–º–∏—Ç–µ "–ì–æ—Ç–æ–≤–æ, –ø–æ—Å—á–∏—Ç–∞—Ç—å"
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∞–º–æ–π –Ω–∏–∑–∫–æ–π (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)
   - ‚úÖ –ò–ò –¥–æ–ª–∂–µ–Ω –æ–±—ä—è—Å–Ω–∏—Ç—å: "–¥–µ—Ç–∞–ª–∏ —É–∂–µ –≥–æ—Ç–æ–≤—ã, —Ç–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ –∏ —Å–≤–∞—Ä–∫–∞"
   - ‚úÖ Warnings –æ–±—ã—á–Ω–æ –ø—É—Å—Ç—ã–µ

#### –¢–µ—Å—Ç 2: –†–µ–∂–∏–º "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Å –Ω—É–ª—è" (from_scratch)
1. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ—Å—Ç 1, –Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ **"–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Å –Ω—É–ª—è"**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã—à–µ –Ω–∞ 40-80%
   - ‚úÖ –ò–ò –¥–æ–ª–∂–µ–Ω —É–ø–æ–º—è–Ω—É—Ç—å: "—Ä–∞–∑–º–µ—Ç–∫–∞, —Ä–µ–∑–∫–∞, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫—Ä–æ–º–æ–∫"
   - ‚úÖ –í reason_long –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

#### –¢–µ—Å—Ç 3: –†–µ–∂–∏–º "–ü–µ—Ä–µ–¥–µ–ª–∫–∞/—Ä–µ–º–æ–Ω—Ç" (rework)
1. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ—Å—Ç 1, –Ω–æ –≤—ã–±–µ—Ä–∏—Ç–µ **"–ü–µ—Ä–µ–¥–µ–ª–∫–∞/—Ä–µ–º–æ–Ω—Ç"**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∞–º–æ–π –≤—ã—Å–æ–∫–æ–π (+60-100%)
   - ‚úÖ –ò–ò –¥–æ–ª–∂–µ–Ω —É–ø–æ–º—è–Ω—É—Ç—å: "—Ä–∞–∑–±–æ—Ä–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —à–≤–æ–≤, —Ä–∏—Å–∫–∏"
   - ‚úÖ –í warnings –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Å–∫—Ä—ã—Ç—ã—Ö –¥–µ—Ñ–µ–∫—Ç–∞—Ö

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ fallback (–µ—Å–ª–∏ –ò–ò –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

1. –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ API –∫–ª—é—á –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞—Å—á—ë—Ç
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∂—ë–ª—Ç–∞—è –ø–ª–∞—à–∫–∞: "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç—å"
   - ‚úÖ –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
   - ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø–∞–¥–∞—Ç—å

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot find module 'https://deno.land/std@0.177.0/http/server.ts'"

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –≠—Ç–æ lint-–æ—à–∏–±–∫–∏ TypeScript, –ø–æ—Ç–æ–º—É —á—Ç–æ IDE –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è Node.js, –∞ Edge Function —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Deno. –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –≤ Supabase —ç—Ç–∏ –æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–ò –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç fallback

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `OPENROUTER_API_KEY` –≤ Supabase Secrets
2. API –∫–ª—é—á –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π –∏–ª–∏ –∏—Å—Ç—ë–∫
3. –ù–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ OpenRouter

**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Supabase Dashboard:
# Settings ‚Üí Edge Functions ‚Üí Secrets
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: OPENROUTER_API_KEY
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–ò –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ü–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Edge Function:
```powershell
supabase functions logs ai-price-estimate
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] –ö–æ–¥ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ (`npm run build`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ 3 —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (pre_cut, from_scratch, rework)
- [ ] Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ò–ò
- [ ] UI –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –∏ AI-–¥–∏–∞–ø–∞–∑–æ–Ω
- [ ] Warnings –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–ª—è —Ä–µ–∂–∏–º–∞ rework
- [ ] –ö–Ω–æ–ø–∫–∞ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ö–ü" —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Edge Function: `supabase functions logs ai-price-estimate`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `OPENROUTER_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Supabase Secrets
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ OpenRouter: https://openrouter.ai/credits

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!** üöÄ
