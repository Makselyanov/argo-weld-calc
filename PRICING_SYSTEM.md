# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å—á—ë—Ç–∞ —Ü–µ–Ω —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏** —Å —É—á—ë—Ç–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π.

---

## üéØ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤

### –¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π:
- **weld** ‚Äî —Å–≤–∞—Ä–∫–∞ (–≤–∫–ª—é—á–∞—è –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É)
- **prep** ‚Äî –∑–∞—á–∏—Å—Ç–∫–∞, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- **finish** ‚Äî —Å–∞—Ç–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–∫—Ä–∞—Å–∫–∞, –ª–∞–∫

### –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º:

| –ú–∞—Ç–µ—Ä–∏–∞–ª | –ö–æ–¥ | weld | prep | finish |
|----------|-----|------|------|--------|
| **–ß–µ—Ä–Ω—ã–π –º–µ—Ç–∞–ª–ª** | `steel` | 1.0 | 1.0 | 1.0 |
| **–ù–µ—Ä–∂–∞–≤–µ–π–∫–∞** | `stainless` | 1.4 | 1.3 | 1.2 |
| **–ê–ª—é–º–∏–Ω–∏–π** | `aluminium` | 1.5 | 1.3 | 1.1 |
| **–ß—É–≥—É–Ω** | `cast_iron` | 1.8 | 1.6 | 1.1 |
| **–ú–µ–¥—å** | `copper` | 1.7 | 1.4 | 1.2 |
| **–õ–∞—Ç—É–Ω—å** | `brass` | 1.4 | 1.2 | 1.1 |
| **–¢–∏—Ç–∞–Ω** | `titanium` | 2.2 | 1.7 | 1.3 |

---

## üìê –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞

```typescript
// 1. –ü–æ–ª—É—á–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∞
const material = form.material ?? 'steel';
const m = MATERIAL_COEFF[material];

// 2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–¥–ª—è —á—ë—Ä–Ω–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞)
const weldBase = weldLengthM * baseWeldRatePerMeter;
const backWeldBase = backWeldLengthM * baseBackWeldRate;
const cleanupBase = weldLengthM * baseCleanupRatePerMeter;
const satinBase = areaM2 * baseSatinRatePerM2;
const paintBase = areaM2 * basePaintRatePerM2;
const varnishBase = areaM2 * baseVarnishRatePerM2;

// 3. –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∞
const weldCost = (weldBase + backWeldBase) * m.weld;
const prepCost = cleanupBase * m.prep;
const finishCost = (satinBase + paintBase + varnishBase) * m.finish;

// 4. –°—É–º–º–∏—Ä—É–µ–º
let subtotal = weldCost + prepCost + finishCost;

// 5. –ü—Ä–∏–º–µ–Ω—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
// (—Ç–æ–ª—â–∏–Ω–∞, –ø–æ–ª–æ–∂–µ–Ω–∏–µ, —É—Å–ª–æ–≤–∏—è, —Å—Ä–æ—á–Ω–æ—Å—Ç—å)

// 6. –î–∞—ë–º –≤–∏–ª–∫—É ¬±10%
const totalMin = Math.round(subtotal * 0.9);
const totalMax = Math.round(subtotal * 1.1);
```

---

## üí∞ –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏ (–¥–ª—è —á—ë—Ä–Ω–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞)

### –°–≤–∞—Ä–∫–∞:
- –°—Ç—ã–∫–æ–≤—ã–µ, —Ç–∞–≤—Ä–æ–≤—ã–µ —à–≤—ã: **800 ‚ÇΩ/–º**
- –û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —à–≤–∞: **600 ‚ÇΩ/–º**

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:
- –ó–∞—á–∏—Å—Ç–∫–∞ —à–≤–∞: **300 ‚ÇΩ/–º**

### –§–∏–Ω–∏—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
- –°–∞—Ç–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: **500 ‚ÇΩ/–º¬≤**
- –ü–æ–∫—Ä–∞—Å–∫–∞: **400 ‚ÇΩ/–º¬≤**
- –õ–∞–∫: **300 ‚ÇΩ/–º¬≤**

---

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `src/types/calculation.ts`
- –û–±–Ω–æ–≤–ª—ë–Ω —Ç–∏–ø `Material` (–≤–µ—Ä–Ω—É–ª–∏ `steel` –≤–º–µ—Å—Ç–æ `black_metal`)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `MATERIAL_COEFF` —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏

```typescript
export const MATERIAL_COEFF = {
  steel:     { weld: 1.0, prep: 1.0, finish: 1.0 },
  stainless: { weld: 1.4, prep: 1.3, finish: 1.2 },
  aluminium: { weld: 1.5, prep: 1.3, finish: 1.1 },
  cast_iron: { weld: 1.8, prep: 1.6, finish: 1.1 },
  copper:    { weld: 1.7, prep: 1.4, finish: 1.2 },
  brass:     { weld: 1.4, prep: 1.2, finish: 1.1 },
  titanium:  { weld: 2.2, prep: 1.7, finish: 1.3 },
} as const;
```

### 2. `src/constants/calculationMappings.ts`
- –û–±–Ω–æ–≤–ª—ë–Ω `MATERIALS`: `black_metal` ‚Üí `steel`

### 3. `src/utils/pricing.ts`
- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ `MATERIAL_COEFF`
- –†–∞–∑–¥–µ–ª–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ weld, prep, finish
- –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏ –¥–ª—è —á—ë—Ä–Ω–æ–≥–æ –º–µ—Ç–∞–ª–ª–∞
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–ø–µ—Ä–∞—Ü–∏—è–º

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: –ß–µ—Ä–Ω—ã–π –º–µ—Ç–∞–ª–ª (steel)
- –î–ª–∏–Ω–∞ —à–≤–∞: 5 –º
- –¢–∏–ø —à–≤–∞: —Å—Ç—ã–∫–æ–≤–æ–π
- **weldCost** = (5√ó800 + 5√ó600) √ó 1.0 = **7000 ‚ÇΩ**
- **prepCost** = 5√ó300 √ó 1.0 = **1500 ‚ÇΩ**
- **finishCost** = 0 (–Ω–µ—Ç —Ñ–∏–Ω–∏—à–∞)
- **–ò—Ç–æ–≥–æ**: ~**8500 ‚ÇΩ** (—Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏)

### –ü—Ä–∏–º–µ—Ä 2: –ù–µ—Ä–∂–∞–≤–µ–π–∫–∞ (stainless)
- –î–ª–∏–Ω–∞ —à–≤–∞: 5 –º
- –¢–∏–ø —à–≤–∞: —Å—Ç—ã–∫–æ–≤–æ–π
- **weldCost** = (5√ó800 + 5√ó600) √ó 1.4 = **9800 ‚ÇΩ**
- **prepCost** = 5√ó300 √ó 1.3 = **1950 ‚ÇΩ**
- **finishCost** = 0
- **–ò—Ç–æ–≥–æ**: ~**11750 ‚ÇΩ** (+38% –∫ —Å—Ç–∞–ª–∏)

### –ü—Ä–∏–º–µ—Ä 3: –¢–∏—Ç–∞–Ω (titanium)
- –î–ª–∏–Ω–∞ —à–≤–∞: 5 –º
- –¢–∏–ø —à–≤–∞: —Å—Ç—ã–∫–æ–≤–æ–π
- **weldCost** = (5√ó800 + 5√ó600) √ó 2.2 = **15400 ‚ÇΩ**
- **prepCost** = 5√ó300 √ó 1.7 = **2550 ‚ÇΩ**
- **finishCost** = 0
- **–ò—Ç–æ–≥–æ**: ~**17950 ‚ÇΩ** (+111% –∫ —Å—Ç–∞–ª–∏)

---

## üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, —Ü–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è:

### –¢–æ–ª—â–∏–Ω–∞:
- –¥–æ 3 –º–º: **√ó0.9**
- 3-6 –º–º: **√ó1.0** (–±–∞–∑–∞)
- 6-12 –º–º: **√ó1.2**
- 12+ –º–º: **√ó1.5**

### –ü–æ–ª–æ–∂–µ–Ω–∏–µ —Å–≤–∞—Ä–∫–∏:
- –ù–∏–∂–Ω–µ–µ: **√ó1.0** (–±–∞–∑–∞)
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ: **√ó1.3**
- –°–º–µ—à–∞–Ω–Ω–æ–µ: **√ó1.4**
- –ü–æ—Ç–æ–ª–æ—á–Ω–æ–µ: **√ó1.5**

### –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã:
- –í—ã—Å–æ—Ç–∞/–ª–µ—Å–∞: **√ó1.2**
- –°—Ç–µ—Å–Ω—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø: **√ó1.2**
- –ù–∞ —É–ª–∏—Ü–µ: **√ó1.1**

### –°—Ä–æ—á–Ω–æ—Å—Ç—å:
- –û–±—ã—á–Ω–æ: **√ó1.0** (–±–∞–∑–∞)
- –°—Ä–æ—á–Ω–æ: **√ó1.3**
- –ù–æ—á—å—é/—Å–º–µ–Ω–∞–º–∏: **√ó1.5**

---

## ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

- ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: `npm run build` ‚Äî —É—Å–ø–µ—à–Ω–æ (3.45s)
- ‚úÖ TypeScript ‚Äî –æ—à–∏–±–æ–∫ –Ω–µ—Ç
- ‚úÖ –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **–ë–∞–∑–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏** –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `pricing.ts` (–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã `baseWeldRatePerMeter` –∏ —Ç.–¥.)

2. **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤** –º–æ–∂–Ω–æ –ø–æ–¥–æ–≥–Ω–∞—Ç—å –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã –≤ `types/calculation.ts` (`MATERIAL_COEFF`)

3. **–§–∏–Ω–∏—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å–µ–π—á–∞—Å –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —ç–∫—Å—Ç—Ä–∞-—É—Å–ª—É–≥–∏. –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –≤ —Ñ–æ—Ä–º–µ.

4. **–î–ª–∏–Ω–∞ —à–≤–∞** –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ –ø–æ–ª—è "–û–±—ä—ë–º —Ä–∞–±–æ—Ç" (–Ω–∞–ø—Ä–∏–º–µ—Ä, "5 –º" –∏–ª–∏ "5")

5. **–û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞** —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç—ã–∫–æ–≤—ã—Ö —à–≤–æ–≤ (`weldType === 'butt'`)

---

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å** ‚Äî —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø–æ–¥ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** ‚Äî –ø–æ–Ω—è—Ç–Ω–æ, –æ—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è —Ü–µ–Ω–∞  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏  
‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º** ‚Äî –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –±–æ–ª—å —Å–≤–∞—Ä—â–∏–∫–∞

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/types/calculation.ts` - —Ç–∏–ø—ã –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã
- `src/utils/pricing.ts` - –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞
- `src/constants/calculationMappings.ts` - UI –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `DATABASE_MIGRATION.md` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ
